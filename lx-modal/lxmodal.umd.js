(function(c,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(c=typeof globalThis<"u"?globalThis:c||self,e(c.lxmodal={},c.vue))})(this,function(c,e){"use strict";const f=n=>(e.pushScopeId("data-v-9b85fced"),n=n(),e.popScopeId(),n),y={class:"modal-header-left"},H={class:"modal-header-left-title"},W={class:"modal-header-right"},b=[f(()=>e.createElementVNode("svg",{class:"icon","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-zuixiaohua"})],-1))],$={key:0,class:"icon","aria-hidden":"true"},x=[f(()=>e.createElementVNode("use",{"xlink:href":"#icon-zuidahua"},null,-1))],M={key:1,class:"icon","aria-hidden":"true"},k=[f(()=>e.createElementVNode("use",{"xlink:href":"#icon-zuidahua1"},null,-1))],w=[f(()=>e.createElementVNode("svg",{class:"icon","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-guanbi"})],-1))],B=["style:any"],C={key:0,class:"modal-footer"},S=e.defineComponent({__name:"ModalContent",props:{id:{type:Number,default:0},title:{type:String,default:"🐽lx-modal"},footerHide:{type:Boolean,default:!1},width:{type:Number,default:500},height:{type:Number,default:250},zIndex:{type:String,default:"100"},maskClosable:{type:Boolean,default:!0},ModalMaskDisplay:{type:Boolean,default:!1},resize:{type:String,default:"auto"},submitModalBeforeEvent:{type:Function,default:null}},emits:["update:modalShow"],setup(n,{expose:i}){const s=n,o=e.getCurrentInstance(),d=e.ref(o==null?void 0:o.appContext.config.globalProperties.uniqueId),a=`draggableDOM-${d.value}`,_=`draggableDOMPoint-${d.value}`,r=`resizeDOM-${d.value}`,p=e.ref(!1);function ze(){let t=document.getElementById(a);const l=document.getElementById(r);p.value?(requestAnimationFrame(()=>{document.body.style.overflow="auto",l.style.width=s.width+"px",l.style.height=s.height+"px",t.style.width="inherit",t.style.height="inherit",t.style.transform=`translate(${document.documentElement.clientWidth/2-t.offsetWidth/2}px,${document.documentElement.clientHeight/2-t.offsetHeight/2}px)`}),p.value=!1):(document.body.style.overflow="hidden",t.style.transform="translate(0px,0px)",t.style.height="100vh",requestAnimationFrame(()=>{l.style.width="100vw",l.style.resize="none"}),p.value=!0)}function E(t){o==null||o.appContext.config.globalProperties.unmountModal(),console.log("==type==",t)}async function Pe(){if(typeof s.submitModalBeforeEvent!="function")return E("submit");await new Promise(()=>{if(s.submitModalBeforeEvent())return E("submit")})}e.onMounted(()=>{Te()});function Te(){let t=null;const l=document.getElementById(a);let m=document.getElementById(_);const V=o==null?void 0:o.appContext.config.globalProperties.modalIndex,g={x:5*V,y:5*V};l.style.transform=`translate(${document.documentElement.clientWidth/2-l.offsetWidth/2+g.x}px,${document.documentElement.clientHeight/2-l.offsetHeight/2+g.y}px)`,m==null||m.addEventListener("dragstart",h=>{h.target.id!==_&&!l||(t=h,l.style.opacity=".7")}),document==null||document.addEventListener("dragover",h=>{if(h.target.id!==_&&!t)return;const qe=window.innerHeight-t.target.offsetHeight,Oe=window.innerWidth-t.target.offsetWidth;l.style.transform=`translate(${Math.min(Math.max(0,h.clientX-t.offsetX),Oe)}px,${Math.min(Math.max(0,h.clientY-t.offsetY),qe)}px)`,h.preventDefault()}),l==null||l.addEventListener("drop",()=>{t=null,m=null,l.style.opacity="1"})}return i({uniqueId:d}),(t,l)=>(e.openBlock(),e.createElementBlock("div",{id:a,class:"modal-content"},[e.createElementVNode("div",{id:_,class:"modal-header",draggable:"true"},[e.createElementVNode("div",y,[e.renderSlot(t.$slots,"header",{},()=>[e.createElementVNode("span",H,e.toDisplayString(n.title),1)],!0)]),e.createElementVNode("div",W,[e.createElementVNode("div",{class:"modal-header-right-btn",onClick:l[0]||(l[0]=m=>t.$emit("update:modalShow",!1))},b),e.createElementVNode("div",{class:"modal-header-right-btn",onClick:ze},[p.value?(e.openBlock(),e.createElementBlock("svg",$,x)):(e.openBlock(),e.createElementBlock("svg",M,k))]),e.createElementVNode("div",{class:"modal-header-right-btn",onClick:l[1]||(l[1]=m=>E("close"))},w)])]),e.createElementVNode("div",{id:r,class:"modal-body","style:any":{width:`${n.width}px`,height:`${n.height}px`,resize:n.resize}},[e.renderSlot(t.$slots,"default",{},void 0,!0)],8,B),e.renderSlot(t.$slots,"footer",{},()=>[n.footerHide?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",C,[e.createElementVNode("button",{class:"modal-button",onClick:l[2]||(l[2]=m=>E("cancel"))},"取消"),e.createElementVNode("button",{class:"modal-button modal-button-primary",onClick:Pe},"提交")]))],!0)]))}}),N=(n,i)=>{const s=n.__vccOpts||n;for(const[o,d]of i)s[o]=d;return s},I=N(S,[["__scopeId","data-v-9b85fced"]]),D={class:"modal"},z=N(e.defineComponent({__name:"index",props:{maskClosable:{type:Boolean,default:!0},ModalMaskDisplay:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:i}){const s=n,o=e.getCurrentInstance();function d(){s.maskClosable&&(o==null||o.appContext.config.globalProperties.unmountModal())}const a=e.ref(!0);function _(r){a.value=r}return(r,p)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",D,[e.withDirectives(e.createElementVNode("div",{class:"modal-mask",onClick:d},null,512),[[e.vShow,n.ModalMaskDisplay]]),e.createVNode(I,e.mergeProps(r.$attrs,{"onUpdate:modalShow":_}),{default:e.withCtx(()=>[e.renderSlot(r.$slots,"default",{},void 0,!0)]),_:3},16)],512)),[[e.vShow,a.value]])}}),[["__scopeId","data-v-cd541b9d"]]);function P(){return Math.random().toString(36).substr(2,9)}let u=e.ref(new Map);function T(n,i){return new Promise(s=>{const o=P(),d=document.createElement("div");d.id=o,document.body.appendChild(d);const a=e.createApp(e.h(z,i,[e.h(n,i)]));a.config.globalProperties.modalIndex=u.value.size,a.config.globalProperties.uniqueId=o,u.value.set(o,a),a.mount(d),a.config.globalProperties.unmountModal=function(){document.body.style.overflow="auto",u.value.get(o).unmount(),d.remove(),u.value.delete(o)},s({uniqueId:o,element:d,app:a})})}const q=e.createElementVNode("h1",null,"i am HelloWorld component",-1),O=e.createElementVNode("h1",null,"i am HelloWorld component",-1),F=e.createElementVNode("h1",null,"i am HelloWorld component",-1),L=e.createElementVNode("h1",null,"i am HelloWorld component",-1),A=e.createElementVNode("h1",null,"i am HelloWorld component",-1),j=e.createElementVNode("h1",null,"i am HelloWorld component",-1),U=e.createElementVNode("h1",null,"i am HelloWorld component",-1),X=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Y=e.createElementVNode("h1",null,"i am HelloWorld component",-1),G=e.createElementVNode("h1",null,"i am HelloWorld component",-1),J=e.createElementVNode("h1",null,"i am HelloWorld component",-1),K=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Q=e.createElementVNode("h1",null,"i am HelloWorld component",-1),R=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Z=e.createElementVNode("h1",null,"i am HelloWorld component",-1),v=e.createElementVNode("h1",null,"i am HelloWorld component",-1),ee=e.createElementVNode("h1",null,"i am HelloWorld component",-1),te=e.createElementVNode("h1",null,"i am HelloWorld component",-1),oe=e.createElementVNode("h1",null,"i am HelloWorld component",-1),le=e.createElementVNode("h1",null,"i am HelloWorld component",-1),ne=e.createElementVNode("h1",null,"i am HelloWorld component",-1),de=e.createElementVNode("h1",null,"i am HelloWorld component",-1),ae=e.createElementVNode("h1",null,"i am HelloWorld component",-1),se=e.createElementVNode("h1",null,"i am HelloWorld component",-1),ie=e.createElementVNode("h1",null,"i am HelloWorld component",-1),ce=e.createElementVNode("h1",null,"i am HelloWorld component",-1),re=e.createElementVNode("h1",null,"i am HelloWorld component",-1),me=e.createElementVNode("h1",null,"i am HelloWorld component",-1),he=e.createElementVNode("h1",null,"i am HelloWorld component",-1),_e=e.createElementVNode("h1",null,"i am HelloWorld component",-1),pe=e.createElementVNode("h1",null,"i am HelloWorld component",-1),fe=e.createElementVNode("h1",null,"i am HelloWorld component",-1),ue=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Ee=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Ne=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Ve=e.createElementVNode("h1",null,"i am HelloWorld component",-1),ge=e.createElementVNode("h1",null,"i am HelloWorld component",-1),ye=e.createElementVNode("h1",null,"i am HelloWorld component",-1),He=e.createElementVNode("h1",null,"i am HelloWorld component",-1),We=e.createElementVNode("h1",null,"i am HelloWorld component",-1),be=e.createElementVNode("h1",null,"i am HelloWorld component",-1),$e=e.createElementVNode("h1",null,"i am HelloWorld component",-1),xe=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Me=e.createElementVNode("h1",null,"i am HelloWorld component",-1),ke=e.createElementVNode("h1",null,"i am HelloWorld component",-1),we=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Be=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Ce=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Se=e.createElementVNode("h1",null,"i am HelloWorld component",-1),Ie=e.defineComponent({__name:"HelloWorld",props:{msg:{}},setup(n){return(i,s)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h1",null,e.toDisplayString(i.msg),1),q,O,F,L,A,j,e.createTextVNode(),U,X,Y,G,J,K,e.createTextVNode(),Q,R,Z,v,ee,te,e.createTextVNode(),oe,le,ne,de,ae,se,e.createTextVNode(),ie,ce,re,me,he,_e,e.createTextVNode(),pe,fe,ue,Ee,Ne,Ve,e.createTextVNode(),ge,ye,He,We,be,$e,e.createTextVNode(),xe,Me,ke,we,Be,Ce,Se],64))}}),De={install(n){n.component("HelloWorld",Ie)}};c.default=De,c.openModal=T,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
