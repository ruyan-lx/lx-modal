(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i.lxmodal={},i.vue))})(this,function(i,e){"use strict";const p=l=>(e.pushScopeId("data-v-cb19211a"),l=l(),e.popScopeId(),l),M={class:"modal-header-left"},x={class:"modal-header-left-title"},k={class:"modal-header-right"},w=[p(()=>e.createElementVNode("svg",{class:"icon","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-zuixiaohua"})],-1))],C={key:0,class:"icon","aria-hidden":"true"},S=[p(()=>e.createElementVNode("use",{"xlink:href":"#icon-zuidahua"},null,-1))],$={key:1,class:"icon","aria-hidden":"true"},B=[p(()=>e.createElementVNode("use",{"xlink:href":"#icon-zuidahua1"},null,-1))],N=[p(()=>e.createElementVNode("svg",{class:"icon","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-guanbi"})],-1))],D={key:0,class:"modal-footer"},V=e.defineComponent({__name:"ModalContent",props:{id:{type:Number,default:0},title:{type:String,default:"\u{1F43D}lx-modal"},footerHide:{type:Boolean,default:!1},width:{type:Number,default:500},height:{type:Number,default:250},zIndex:{type:String,default:"100"},maskClosable:{type:Boolean,default:!0},ModalMaskDisplay:{type:Boolean,default:!1},resize:{type:String,default:"auto"},submitModalBeforeEvent:{type:Function,default:null}},emits:["update:modalShow"],setup(l,{expose:r}){const s=l,n=e.getCurrentInstance(),a=e.ref(n==null?void 0:n.appContext.config.globalProperties.uniqueId),d=`draggableDOM-${a.value}`,f=`draggableDOMPoint-${a.value}`,c=`resizeDOM-${a.value}`,h=e.ref(!1);function W(){requestAnimationFrame(()=>{let t=document.getElementById(d);const o=document.getElementById(c);h.value?(document.body.style.overflow="auto",o.style.width=s.width+"px",o.style.height=s.height+"px",t.style.width="inherit",t.style.height="inherit",t.style.transform=`translate(${document.documentElement.clientWidth/2-t.offsetWidth/2}px,${document.documentElement.clientHeight/2-t.offsetHeight/2}px)`,o.style.resize=s.resize,h.value=!1):(document.body.style.overflow="hidden",t.style.transform="translate(0px,0px)",t.style.width="100vw",t.style.height="100vh",o.style.width="100vw",o.style.resize="none",h.value=!0)})}function y(t){switch(t){case"cancel":case"close":case"submit":n==null||n.appContext.config.globalProperties.unmountModal();break}}async function v(){if(typeof s.submitModalBeforeEvent!="function")return y("submit");await new Promise(()=>{if(s.submitModalBeforeEvent())return y("submit")})}e.onMounted(()=>{F()});function F(){let t=null;const o=document.getElementById(d);let m=document.getElementById(f);const _=n==null?void 0:n.appContext.config.globalProperties.modalIndex,E={x:5*_,y:5*_};o.style.transform=`translate(${document.documentElement.clientWidth/2-o.offsetWidth/2+E.x}px,${document.documentElement.clientHeight/2-o.offsetHeight/2+E.y}px)`,m==null||m.addEventListener("dragstart",u=>{u.target.id!==f&&!o||(t=u,o.style.opacity=".92")}),document==null||document.addEventListener("dragover",u=>{if(u.target.id!==f&&!t)return;const L=window.innerHeight-t.target.offsetHeight,A=window.innerWidth-t.target.offsetWidth;o.style.transform=`translate(${Math.min(Math.max(0,u.clientX-t.offsetX),A)}px,${Math.min(Math.max(0,u.clientY-t.offsetY),L)}px)`,u.preventDefault()}),o==null||o.addEventListener("drop",()=>{t=null,m=null,o.style.opacity="1"})}return r({uniqueId:a}),(t,o)=>(e.openBlock(),e.createElementBlock("div",{id:d,class:"modal-content"},[e.createElementVNode("div",{id:f,class:"modal-header",draggable:"true",style:{height:"auto"}},[e.createElementVNode("div",M,[e.renderSlot(t.$slots,"header",{},()=>[e.createElementVNode("span",x,e.toDisplayString(l.title),1)],!0)]),e.createElementVNode("div",k,[e.createElementVNode("div",{class:"modal-header-right-btn",onClick:o[0]||(o[0]=m=>t.$emit("update:modalShow",!1))},w),e.createElementVNode("div",{class:"modal-header-right-btn",onClick:W},[h.value?(e.openBlock(),e.createElementBlock("svg",C,S)):(e.openBlock(),e.createElementBlock("svg",$,B))]),e.createElementVNode("div",{class:"modal-header-right-btn",onClick:o[1]||(o[1]=m=>y("close"))},N)])]),e.createElementVNode("div",{id:c,class:"modal-body",style:e.normalizeStyle(`width: ${l.width}px; height: ${l.height}px ;resize: ${l.resize}`)},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4),e.renderSlot(t.$slots,"footer",{},()=>[l.footerHide?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",D,[e.createElementVNode("button",{class:"modal-button",onClick:o[2]||(o[2]=m=>y("cancel"))},"\u53D6\u6D88"),e.createElementVNode("button",{class:"modal-button modal-button-primary",onClick:v},"\u63D0\u4EA4")]))],!0)]))}}),b=(l,r)=>{const s=l.__vccOpts||l;for(const[n,a]of r)s[n]=a;return s},I=b(V,[["__scopeId","data-v-cb19211a"]]),z={class:"modal"},P=b(e.defineComponent({__name:"index",props:{maskClosable:{type:Boolean,default:!0},ModalMaskDisplay:{type:Boolean,default:!1}},emits:["close"],setup(l,{emit:r}){const s=l,n=e.getCurrentInstance();function a(){s.maskClosable&&(n==null||n.appContext.config.globalProperties.unmountModal())}const d=e.ref(!0);function f(c){d.value=c}return(c,h)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",z,[e.withDirectives(e.createElementVNode("div",{class:"modal-mask",onClick:a},null,512),[[e.vShow,l.ModalMaskDisplay]]),e.createVNode(I,e.mergeProps(c.$attrs,{"onUpdate:modalShow":f}),{default:e.withCtx(()=>[e.renderSlot(c.$slots,"default",{},void 0,!0)]),_:3},16)],512)),[[e.vShow,d.value]])}}),[["__scopeId","data-v-cd541b9d"]]);function H(){return Math.random().toString(36).substr(2,9)}let g=e.ref(new Map);function O(l,r){return new Promise(s=>{const n=H(),a=document.createElement("div");a.id=n,document.body.appendChild(a);const d=e.createApp(e.h(P,r,[e.h(l,r)]));d.config.globalProperties.modalIndex=g.value.size,d.config.globalProperties.uniqueId=n,g.value.set(n,d),d.mount(a),d.config.globalProperties.unmountModal=function(){document.body.style.overflow="auto",g.value.get(n).unmount(),a.remove(),g.value.delete(n)},s({uniqueId:n,element:a,app:d})})}const q={};i.default=q,i.openModal=O,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
